ip vrf cust1
rd 1:1

int f1/0.11.1
ip vrf forwarding cust1
no shutdown
encapsulation dot1q 11
ip nat inside
ip address 172.16.10.2 255.255.255.0
description cust1_customer

router bgp 11179
		address-family ipv4 vrf cust1
	redistribute static metric 10
	neighbor 172.16.10.20 remote-as 100
	neighbor 172.16.10.20 activate
	default-information originate
	exit-address-family
		address-family ipv4 vrf cust1
	redistribute static metric 10
	neighbor 172.16.10.30 remote-as 101
	neighbor 172.16.10.30 activate
	default-information originate
	exit-address-family
	ip nat pool cust1_pub_ip 192.0.2.0 prefix-length 32
ip access-list standard cust1_lan permit any
ip nat inside source list cust1_lan pool cust1_pub_ip interface f0/0 vrf cust1 overload
ip route vrf cust1 0.0.0.0 0.0.0.0 10.10.10.1 global

ip vrf cust2
rd 1:1

int f1/0.22.1
ip vrf forwarding cust2
no shutdown
encapsulation dot1q 11
ip nat inside
ip address 172.16.20.1 255.255.255.0
description cust2_customer

router bgp 11179
		address-family ipv4 vrf cust2
	redistribute static metric 10
	neighbor 172.16.20.20 remote-as 200
	neighbor 172.16.20.20 activate
	default-information originate
	exit-address-family
		address-family ipv4 vrf cust2
	redistribute static metric 10
	neighbor 172.16.20.30 remote-as 201
	neighbor 172.16.20.30 activate
	default-information originate
	exit-address-family
	ip nat pool cust2_pub_ip 192.0.2.0 prefix-length 32
ip access-list standard cust2_lan permit any
ip nat inside source list cust2_lan pool cust2_pub_ip interface f0/0 vrf cust2 overload
ip route vrf cust2 0.0.0.0 0.0.0.0 10.10.10.1 global

